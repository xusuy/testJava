package com.basic;

import org.junit.Test;

/**
 * @author xsy
 * @create 2019-12-26 14:56
 * @desc 数据类型之间转换
 **/
public class DataTypeConvert {
    private static final String BIN_SEPARATOR = " ";

    /**
     * 二进制字符串转换为普通字符串
     *
     * @param binaryStr 二进制字符串
     * @return String 普通字符串
     * @Auth zongf
     * @Date 2019-05-07
     */
    public static String toString(String binaryStr) {

        if (binaryStr == null) return null;

        String[] binArrays = binaryStr.split(BIN_SEPARATOR);


        StringBuffer sb = new StringBuffer();
        for (String binStr : binArrays) {
            char c = binstrToChar(binStr);
            sb.append(c);
        }
        return sb.toString();
    }

    /**
     * 将二进制转换成字符
     *
     * @param binStr 二进制字符串
     * @return char
     * @Auth zongf
     * @Date 2019-05-07
     */
    private static char binstrToChar(String binStr) {
        int[] temp = binstrToIntArray(binStr);
        int sum = 0;
        for (int i = 0; i < temp.length; i++) {
            sum += temp[temp.length - 1 - i] << i;
        }
        return (char) sum;
    }

    /**
     * 二进制字符转换为int数组
     *
     * @param binStr 二进制字符串
     * @return int[]
     * @Auth zongf
     * @Date 2019-05-07
     */
    private static int[] binstrToIntArray(String binStr) {
        char[] temp = binStr.toCharArray();
        int[] result = new int[temp.length];
        for (int i = 0; i < temp.length; i++) {
            result[i] = temp[i] - 48;
        }
        return result;
    }

    //16进制字符串转换为普通字符串
    @Test
    public void testHexStrConvertString() throws Exception {
        String byteString = "ACED0005737200136A6176612E7574696C2E41727261794C6973747881D21D99C7619D03000149000473697A65787000000004770400000004737200176A6176612E7574696C2E4C696E6B6564486173684D617034C04E5C106CC0FB0200015A000B6163636573734F72646572787200116A6176612E7574696C2E486173684D61700507DAC1C31660D103000246000A6C6F6164466163746F724900097468726573686F6C6478703F4000000000001877080000002000000010740002696474002431364634304443442D323842302D303734412D393238432D46383334434533393230334674000964617461537461746574000675706461746574002431364436363846442D443341302D303545362D313134362D34463031323133413838343174000074002431364436363846442D443341302D303545362D313134362D34463031323133413838343271007E000A74002431364436363846442D443341302D303545362D313134362D34463031323133413838343371007E000A74002431364436363846442D443341302D303545362D313134362D34463031323133413838343471007E000A74002431364436363846442D443341302D303545362D313134362D34463031323133413838343571007E000A74002431364436363846442D443341302D303545362D313134362D34463031323133413838343671007E000A74002431364436363846442D443341302D303545362D313134362D34463031323133413838343771007E000A74002431364436363846442D443341302D303545362D313134362D34463031323133413838343871007E000A74002431364436363846442D443342302D303545412D343041382D30414535343432333732423474002431364634304443442D323842302D303734412D393238432D46383334434533393230334674002431364436363846442D443345302D303545422D354143412D36374632393130454245423371007E000A74002431364436363846462D423039302D303545442D354644462D433342323836434144443834740002313174002431364436363930302D354445302D303546332D364533312D443345463741423042383743740006E5AD94E4BC9F74002431364436363930452D344237302D303546362D453334372D34373031334342384538344574000A323031392D31322D3031740005696E646578737200116A6176612E6C616E672E496E746567657212E2A0A4F781873802000149000576616C7565787200106A6176612E6C616E672E4E756D62657286AC951D0B94E08B02000078700000000078007371007E00023F400000000000187708000000200000001071007E000574002431364634304443442D324533302D303734432D454542442D34434544344333354331394571007E000774000664656C65746571007E000971007E000A71007E000B71007E000A71007E000C71007E000A71007E000D71007E000A71007E000E71007E000A71007E000F71007E000A71007E001071007E000A71007E001171007E000A71007E001274002431364634304443442D324533302D303734432D454542442D34434544344333354331394571007E001471007E000A71007E0015740002323271007E0017740006E5AD94E4BC9F71007E001974000A323031392D31322D303271007E001B7371007E001C0000000178007371007E00023F400000000000187708000000200000001071007E000574002431364634304532302D334343302D303837422D333835302D45433046393738333842454471007E000774000675706461746571007E000971007E000A71007E000B71007E000A71007E000C71007E000A71007E000D71007E000A71007E000E71007E000A71007E000F71007E000A71007E001071007E000A71007E001171007E000A71007E001274002431364634304532302D334343302D303837422D333835302D45433046393738333842454471007E001471007E000A71007E001574000333333371007E0017740006E5AD94E4BC9F71007E001974000A323032302D30312D303171007E001B71007E002678007371007E00023F400000000000187708000000200000001071007E000574002431364634304532302D334344302D303837432D454633352D38314537343032324338373371007E000774000675706461746571007E000971007E000A71007E000B71007E000A71007E000C71007E000A71007E000D71007E000A71007E000E71007E000A71007E000F71007E000A71007E001071007E000A71007E001171007E000A71007E001274002431364634304532302D334344302D303837432D454633352D38314537343032324338373371007E001471007E000A71007E001574000334343471007E0017740006E5AD94E4BC9F71007E001974000A323032302D30312D303271007E001B7371007E001C00000002780078";
//        byte[] bytes = Hex.decodeHex(byteString);
//        String str = new String(bytes, "utf-8");
//        System.out.println(str);
        System.out.println(hexStringToString(byteString));
    }

    /**
     * 16进制字符串转换为字符串
     *
     * @param hexString 16进制的字符串表示
     * @return
     */
    public static String hexStringToString(String hexString) {
        if (hexString == null || hexString.equals("")) {
            return null;
        }
        hexString = hexString.replace(" ", "");
        byte[] baKeyword = new byte[hexString.length() / 2];
        for (int i = 0; i < baKeyword.length; i++) {
            try {
                baKeyword[i] = (byte) (0xff & Integer.parseInt(
                        hexString.substring(i * 2, i * 2 + 2), 16));
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
        try {
            hexString = new String(baKeyword, "utf-8");
        } catch (Exception e1) {
            e1.printStackTrace();
        }
        return hexString;
    }
}
